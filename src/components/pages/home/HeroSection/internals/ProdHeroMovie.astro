---
import poster from "@assets/videos/top.generated.png";
import ResponsiveVideo, {
  type Sources,
} from "@components/commons/ResponsiveVideo/ResponsiveVideo.astro";

import moviePcAv1 from "@assets/videos/top-pc.generated.av1.webm";
import moviePcH264 from "@assets/videos/top-pc.generated.h264.mp4";
import moviePcVp9 from "@assets/videos/top-pc.generated.vp9.webm";
import movieSpAv1 from "@assets/videos/top-sp.generated.av1.webm";
import movieSpH264 from "@assets/videos/top-sp.generated.h264.mp4";
import movieSpVp9 from "@assets/videos/top-sp.generated.vp9.webm";

const props = Astro.props;

const sources: Sources[] = [
  // 再生優先度が高い順に並べる
  { pc: moviePcAv1, sp: movieSpAv1 },
  { pc: moviePcVp9, sp: movieSpVp9 },
  { pc: moviePcH264, sp: movieSpH264 },
];
---

<ResponsiveVideo
  muted
  autoplay
  playsInline
  disableRemotePlayback
  loop
  poster={poster.src}
  aria-label="ロリっ子喫茶ぷぷりえの紹介ムービー"
  sources={sources}
  {...props}
/>
