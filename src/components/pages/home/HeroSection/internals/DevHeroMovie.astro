---
import poster from "@assets/videos/top.generated.png";
import ResponsiveVideo, {
  type Sources,
} from "@components/commons/ResponsiveVideo/ResponsiveVideo.astro";

import moviePcH264 from "@assets/videos/top-pc.generated.dev.h264.mp4";
import moviePcVp9 from "@assets/videos/top-pc.generated.dev.vp9.webm";
import movieSpH264 from "@assets/videos/top-sp.generated.dev.h264.mp4";
import movieSpVp9 from "@assets/videos/top-sp.generated.dev.vp9.webm";
// AV1 のエンコードはかかる時間が長いので、開発モードでは生成しない

const props = Astro.props;

const sources: Sources[] = [
  { pc: moviePcH264, sp: movieSpH264 },
  { pc: moviePcVp9, sp: movieSpVp9 },
];
---

<ResponsiveVideo
  muted
  autoplay
  playsInline
  disableRemotePlayback
  loop
  poster={poster.src}
  aria-label="ロリっ子喫茶ぷぷりえの紹介ムービー"
  sources={sources}
  {...props}
/>
