---
import x264Pc from "@assets/videos/top-pc.generated.avc.mp4";
import x264PcDev from "@assets/videos/top-pc.generated.dev.avc.mp4";
import x264Sp from "@assets/videos/top-sp.generated.avc.mp4";
import x264SpDev from "@assets/videos/top-sp.generated.dev.avc.mp4";
import poster from "@assets/videos/top.generated.png";
import ResponsiveVideo, {
  type Sources,
} from "@components/commons/ResponsiveVideo/ResponsiveVideo.astro";

const isDev = process.env["NODE_ENV"] !== "production";

const props = Astro.props;

const devSources: Sources[] = [
  {
    pc: x264PcDev,
    sp: x264SpDev,
  },
];

const prodSources: Sources[] = [
  {
    pc: x264Pc,
    sp: x264Sp,
  },
];
---

<ResponsiveVideo
  muted
  autoplay
  playsInline
  disableRemotePlayback
  loop
  poster={poster.src}
  aria-label="ロリっ子喫茶ぷぷりえの紹介ムービー"
  sources={isDev ? devSources : prodSources}
  {...props}
/>
