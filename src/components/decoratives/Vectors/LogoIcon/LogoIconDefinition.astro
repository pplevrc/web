---
import { fetchOfficialSocialLinks } from "@lib/contents/official/social";
import { unique } from "@lib/utils/array";
import LogoIcon from "./LogoIcon.astro";
import {
  type LogoIconType,
  type OptionalLogoIconType,
  isSupportedLogo,
} from "./types";

interface Props {
  logos?: OptionalLogoIconType[];
}

const { logos = [] } = Astro.props;

const ppleCommonSocialLinkTypes = (await fetchOfficialSocialLinks()).map(
  (link) => link.type,
);

const definiteLogos = unique([
  ...logos,
  ...ppleCommonSocialLinkTypes,
] as LogoIconType[]).map((type) => (isSupportedLogo(type) ? type : "other"));
---

{definiteLogos.map((type) => <LogoIcon type={type} definition />)}
