---
import { hash } from "@lib/utils/random";
import { css } from "@styles/css";
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"svg"> {
  /**
   * SVG を `<symbol>` として定義するかどうか.
   * `true` にすると、`<symbol>` が返され, アイコンの SVG 定義が含まれます.
   * `false` にすると、`<use>` が返され, 事前に定義された SVG を参照します.
   */
  definition?: boolean;
}

const { definition = false, class: className, ...props } = Astro.props;

const symbolId = hash("logo-icon-bluesky");
---

<svg
  viewBox="0 0 18 16"
  xmlns="http://www.w3.org/2000/svg"
  class:list={[className, css({ fill: "[currentColor]" })]}
  {...props}
>
  {
    definition ? (
      <symbol id={symbolId} viewBox="0 0 18 16">
        <path d="M3.9 1.1C6 2.6 8.2 5.8 9 7.5C9.8 5.8 12 2.6 14.1 1.1C15.6 -0.1 18 -0.9 18 1.9C18 2.4 17.7 6.5 17.5 7.2C16.9 9.5 14.5 10.1 12.4 9.7C16.1 10.4 17 12.4 15 14.5C11.2 18.4 9.5 13.5 9.1 12.3C9 12 9 11.9 9 12C9 11.9 9 12 8.9 12.3C8.5 13.5 6.8 18.4 3 14.5C1 12.4 1.9 10.4 5.6 9.7C3.5 10.1 1.1 9.5 0.5 7.2C0.3 6.5 0 2.4 0 1.9C0 -0.9 2.4 -0.1 3.9 1.1Z" />
      </symbol>
    ) : (
      <use xlink:href={`#${symbolId}`} />
    )
  }
</svg>
