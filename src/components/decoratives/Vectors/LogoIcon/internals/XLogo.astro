---
import { hash } from "@lib/utils/random";
import { css } from "@styles/css";
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"svg"> {
  /**
   * SVG を `<symbol>` として定義するかどうか.
   * `true` にすると、`<symbol>` が返され, アイコンの SVG 定義が含まれます.
   * `false` にすると、`<use>` が返され, 事前に定義された SVG を参照します.
   */
  definition?: boolean;
}

const { definition = false, class: className, ...props } = Astro.props;

const symbolId = hash("logo-icon-x");
---

<svg
  viewBox="0 0 16 16"
  xmlns="http://www.w3.org/2000/svg"
  class:list={[className, css({ fill: "[currentColor]" })]}
  {...props}
>
  {
    definition ? (
      <symbol id={symbolId} viewBox="0 0 16 16">
        <path d="M9.5 6.8L15.5 0H14.1L8.9 5.9L4.8 0H0L6.2 8.9L0 16H1.4L6.9 9.8L11.2 16H16L9.5 6.8H9.5M7.6 9L7 8.1L1.9 1H4L8.2 6.7L8.8 7.6L14.1 15H11.9L7.6 9V9Z" />
      </symbol>
    ) : (
      <use xlink:href={`#${symbolId}`} />
    )
  }
</svg>
