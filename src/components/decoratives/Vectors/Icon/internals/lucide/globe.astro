---
import { css } from "@styles/css";
import type { HTMLAttributes } from "astro/types";
import { globeId } from "./ids";

interface Props extends HTMLAttributes<"svg"> {
  /**
   * SVG を `<symbol>` として定義するかどうか.
   * `true` にすると、`<symbol>` が返され, アイコンの SVG 定義が含まれます.
   * `false` にすると、`<use>` が返され, 事前に定義された SVG を参照します.
   */
  definition?: boolean;
}

const { definition = false, class: className, ...props } = Astro.props;
---

<svg
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
  class:list={[
    className,
    css({
      fill: "[none]",
      stroke: "[currentColor]",
      strokeWidth: "[2]",
      strokeLinecap: "[round]",
      strokeLinejoin: "[round]",
    }),
  ]}
  {...props}
>
  {
    definition ? (
      <symbol id={globeId} viewBox="0 0 24 24">
        <path d="M21.54 15H17a2 2 0 0 0-2 2v4.54" />
        <path d="M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17" />
        <path d="M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05" />
        <circle cx="12" cy="12" r="10" />
      </symbol>
    ) : (
      <use xlink:href={`#${globeId}`} />
    )
  }
</svg>
