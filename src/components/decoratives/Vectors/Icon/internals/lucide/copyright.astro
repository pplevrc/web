---
import { css } from "@styles/css";
import type { HTMLAttributes } from "astro/types";
import { copyrightId } from "./ids";

interface Props extends HTMLAttributes<"svg"> {
  /**
   * SVG を `<symbol>` として定義するかどうか.
   * `true` にすると、`<symbol>` が返され, アイコンの SVG 定義が含まれます.
   * `false` にすると、`<use>` が返され, 事前に定義された SVG を参照します.
   */
  definition?: boolean;
}

const { definition = false, class: className, ...props } = Astro.props;
---

<svg
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
  class:list={[
    className,
    css({
      fill: "[none]",
      stroke: "[currentColor]",
      strokeWidth: "[2]",
      strokeLinecap: "[round]",
      strokeLinejoin: "[round]",
    }),
  ]}
  {...props}
>
  {
    definition ? (
      <symbol id={copyrightId} viewBox="0 0 24 24">
        <>
          <circle cx="12" cy="12" r="10" />
          <path d="M14.83 14.83a4 4 0 1 1 0-5.66" />
        </>
      </symbol>
    ) : (
      <use xlink:href={`#${copyrightId}`} />
    )
  }
</svg>
