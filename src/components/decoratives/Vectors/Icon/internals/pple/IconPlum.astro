---
import { css } from "@styles/css";
import type { HTMLAttributes } from "astro/types";
import { plumId } from "./ids";

interface Props extends HTMLAttributes<"svg"> {
  /**
   * SVG を `<symbol>` として定義するかどうか.
   * `true` にすると、`<symbol>` が返され, アイコンの SVG 定義が含まれます.
   * `false` にすると、`<use>` が返され, 事前に定義された SVG を参照します.
   */
  definition?: boolean;
}

const { definition = false, class: className, ...props } = Astro.props;
---

<svg
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
  class:list={[className, css({ fill: "[currentColor]" })]}
  {...props}
>
  {
    definition ? (
      <symbol id={plumId} viewBox="0 0 24 24">
        <path
          clip-rule="evenodd"
          d="M12 0c4.5 0 5.6 5 5.6 5s4.7-.8 6.1 3.5-2.9 7.1-2.9 7.1 2 4.5-1.5 7.2c-3.6 2.8-7.3-.7-7.3-.7s-4 3.7-7.3.7-1.5-7.2-1.5-7.2-4.3-2.9-3-7C1.7 4.3 6.7 5 6.7 5s.9-5 5.4-5Zm-.4 9v2.5L10 9.9c0-.5 0-.8-.2-1-.2-.4-1-.4-1.3 0-.4.3-.4 1 0 1.3.2.3.6.3 1 .2l1.7 1.8H8.6c0-.4-.3-.7-.8-.7-.6 0-1 .4-1 1s.4 1 .9 1 .7-.2 1-.5H11l-1.7 1.7c-.4 0-.7 0-1 .2-.4.3-.3 1 0 1.3.2.4 1 .5 1.3.1.4-.3.3-.5.2-1l1.7-1.8V16c-.3.2-.5.5-.5 1a1 1 0 0 0 1.8 0c0-.5-.2-.8-.5-1v-2.5l1.7 1.8c0 .3 0 .7.2 1 .4.4 1 .4 1.4 0 .4-.4.2-1 0-1.3s-.7-.3-1-.3L13 13h2.4c.2.3.5.5 1 .5s.8-.4.8-1-.3-1-.9-1c-.5 0-.7.3-.9.7H13l1.7-1.9c.2 0 .6.1.9-.2.4-.3.4-1 0-1.4a1 1 0 0 0-1.3.1c-.3.3-.3.6-.2 1l-1.7 1.7V9c.3-.2.5-.5.5-.9 0-.3-.3-1-1-1s-.8.7-.8 1c0 .5.2.7.5 1Z"
        />
      </symbol>
    ) : (
      <use xlink:href={`#${plumId}`} />
    )
  }
</svg>
