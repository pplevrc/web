---
import { css } from "@styles/css";
import type { HTMLAttributes } from "astro/types";
import { flowerId } from "./ids";

interface Props extends HTMLAttributes<"svg"> {
  /**
   * SVG を `<symbol>` として定義するかどうか.
   * `true` にすると、`<symbol>` が返され, アイコンの SVG 定義が含まれます.
   * `false` にすると、`<use>` が返され, 事前に定義された SVG を参照します.
   */
  definition?: boolean;
}

const { definition = false, class: className, ...props } = Astro.props;
---

<svg
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
  class:list={[className, css({ fill: "[currentColor]" })]}
  {...props}
>
  {
    definition ? (
      <symbol id={flowerId} viewBox="0 0 24 24">
        <path
          clip-rule="evenodd"
          d="M17.4 5s-.7-5-5.5-5C7.2 0 6.7 5 6.7 5s-5-.8-6.4 3.8c-1.4 4.7 3 6.8 3 6.8S1 19.7 4.5 22.8c3.6 3 7.3-.7 7.3-.7s4 3.8 7.5.7c3.6-3.1 1.4-7.2 1.4-7.2s4.3-2.2 3-6.8c-1.4-4.6-6.4-3.7-6.4-3.7Zm-10 7.7c.1-2.5 2-4.4 4.5-4.5 2.5 0 4.5 2 4.6 4.4.1 2.7-1.9 5-4.6 5-2.5 0-4.5-2.3-4.5-4.9Z"
        />
      </symbol>
    ) : (
      <use xlink:href={`#${flowerId}`} />
    )
  }
</svg>
