---
import { getOgpImage } from "@lib/utils/image";
import type { ImageMetadata } from "astro";

interface Props {
  title: string;
  description: string;
  ogp?: ImageMetadata | string;
}

const props = Astro.props;

const siteUrl = Astro.url.href;

async function getOgpPath(): Promise<string> {
  if (!props.ogp) return "";

  const image = await getOgpImage(props.ogp);
  return image.src;
}
---

<meta property="og:title" content={props.title} />
<meta property="og:site_name" content="ロリっ子喫茶ぷぷりえ" />
<meta property="og:description" content={props.description} />
<meta property="og:image" content={await getOgpPath()} />
<meta property="og:type" content="website" />
<meta property="og:url" content={siteUrl} />

{/* X Card */}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={props.title} />
<meta name="twitter:description" content={props.description} />
<meta name="twitter:image" content={await getOgpPath()} />
