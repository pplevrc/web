---
import CastPickupSection from "@components/pages/home/CastPickupSection/CastPickupSection.astro";
import HeroSection from "@components/pages/home/HeroSection/HeroSection.astro";
import NewsHeadlineSection from "@components/pages/home/NewsHeadlineSection/NewsHeadlineSection.astro";
import Layout from "@layouts/Layout.astro";
import { css } from "@styles/css";

// @ts-ignore ファイルが動的に作られるため
import heroThumbnail from "@assets/videos/top.generated.thumbnail.webp"

const mainClass = css({
  display: "flex",
  flexDir: "column",
  scrollSnapType: "y",
  scrollSnapStrictness: "proximity",
});

// 末尾の Query Parameter を削除した src 文字列 (thumbnail.src は debug mode では URL ではない)
const ogp = heroThumbnail.src.split("?")[0];
---

<Layout
  headMeta={{
    title: "ロリっ子喫茶ぷぷりえ",
    description: "ロリっ子喫茶ぷぷりえのホームページです.",
    keywords: [],
    ogp
  }}
  mainClass={mainClass}
  defineShapes={["letter", "star"]}
>
  <Fragment slot="head">
    <link rel="preload" href={heroThumbnail.src} as="image" type="image/webp" fetchpriority="high" />
  </Fragment>
  <HeroSection />
  <NewsHeadlineSection />
  <CastPickupSection />
</Layout>
