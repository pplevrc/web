---
import { getCollection } from "astro:content";
import PageHeading from "@components/decoratives/Headings/PageHeading.astro";
import CastListNavigator from "@components/pages/cast/CastListNavigator/CastListNavigator.astro";
import Layout from "@layouts/Layout.astro";
import { fetchMeta } from "@lib/contents/meta";

const castCollection = await getCollection("casts");

const casts = castCollection.map((cast) => cast.data);

const {
  casts: { title, description, keywords, thumbnail },
} = await fetchMeta();
---

<Layout
  headMeta={{
    title,
    description,
    keywords,
    ogp: thumbnail,
  }}
>
  <PageHeading img={thumbnail}> {title} </PageHeading>
  <CastListNavigator casts={casts} />
</Layout>
